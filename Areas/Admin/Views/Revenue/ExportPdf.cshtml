@model CuaHangBanSach.ViewModels.RevenueFilterViewModel
@{
    Layout = null; // Xu·∫•t PDF kh√¥ng c·∫ßn layout
    var chartImg = Model.ChartImageBase64;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>B√°o c√°o doanh thu</title>
    <style>
        body {
            font-family: Arial;
            margin: 20px;
        }

        h2 {
            text-align: center;
            color: #2c3e50;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        .summary-boxes {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .box {
            padding: 15px;
            background-color: #f8f8f8;
            border-radius: 8px;
            width: 30%;
            text-align: center;
        }

            .box h4 {
                margin: 0;
                font-size: 14px;
                color: #666;
            }

            .box p {
                margin: 5px 0 0;
                font-size: 18px;
                font-weight: bold;
            }

        .chart-container {
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <h2>
        üìä B√°o c√°o doanh thu
        @{
            if (Model.FilterType == "day")
            {
                <text>t·ª´ @Model.FromDate?.ToString("dd/MM/yyyy") ƒë·∫øn @Model.ToDate?.ToString("dd/MM/yyyy")</text>
                ;
            }
            else if (Model.FilterType == "month")
            {
                <text>t·ª´ @Model.FromMonth/@Model.FromMonthYear ƒë·∫øn @Model.ToMonth/@Model.ToMonthYear</text>
                ;
            }
            else
            {
                <text>t·ª´ nƒÉm @Model.FromYear ƒë·∫øn @Model.ToYear</text>
                ;
            }
        }
    </h2>

    <div class="summary-boxes">
        <div class="box">
            <h4>T·ªïng ƒë∆°n ho√†n th√†nh</h4>
            <p>@Model.TotalOrders</p>
        </div>
        <div class="box">
            <h4>T·ªïng s·∫£n ph·∫©m b√°n</h4>
            <p>@Model.TotalProducts</p>
        </div>
        <div class="box">
            <h4>T·ªïng doanh thu</h4>
            <p>@($"{Model.TotalRevenue:N0} VND")</p>
        </div>
    </div>
    <div class="summary-boxes">
        <div class="box">
            <h4>Chi ph√≠ nh·∫≠p h√†ng</h4>
            <p>@($"{Model.TotalImportCost:N0} VND")</p>
        </div>
        <div class="box">
            <h4>L·ª£i nhu·∫≠n r√≤ng</h4>
            <p>@($"{Model.NetProfit:N0} VND")</p>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Th·ªùi gian</th>
                <th>Doanh thu (VND)</th>
                <th>Chi ph√≠ nh·∫≠p (VND)</th>
                <th>L·ª£i nhu·∫≠n (VND)</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.Labels.Count; i++)
            {
                var label = Model.Labels[i];
                var revenue = Model.Revenues[i];
                var cost = Model.ImportCosts[i];
                var profit = revenue - cost;
                <tr>
                    <td>@label</td>
                    <td>@($"{revenue:N0} VND")</td>
                    <td>@($"{cost:N0} VND")</td>
                    <td>@($"{profit:N0} VND")</td>
                </tr>
            }
        </tbody>
    </table>

    @if (!string.IsNullOrEmpty(chartImg))
    {
        <div class="chart-container">
            <img src="@chartImg" alt="Bi·ªÉu ƒë·ªì doanh thu" style="max-width: 100%; height: auto;" />
        </div>
    }
</body>
</html>